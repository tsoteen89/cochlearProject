<html ng-app="regApp" style="width:100%;height:100%;">
   <head>
      <title>AII Registration</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <link href="css/facReg.css" rel="stylesheet">
   </head>
    <body >
        <div ng-controller="regCtrl" class="container-fluid">
      <!-- Header -->
      <div style="background-color: white; box-shadow: 0 2px 10px -1px gray; width:100%; height:8%">
         <a class="navbar-brand" style="color: black" href="#">Auditory Implant Initiative</a>
      </div>
      <br>
        
        <!--Stolen form -->
        <!-- multistep form -->
        <form id="msform">
            <!-- progressbar -->
            <ul id="progressbar">
                <li class="active">Facility Registration</li>
                <li>Facility Administrator Registration</li>
            </ul>
            <!-- fieldsets -->
            <fieldset>
                <h3 class="fs-title">Step 1</h3>
                <h3 class="fs-subtitle">Register your facility</h3>
                
                <input type="text" name="facName" placeholder="Facility Name" ng-model="facilityData.Name" />
                <input type="text" name="address" placeholder="Address" ng-model="facilityData.Address1" />
                <div class="row">
                    <div class="col-md-6"><input type="text" name="city" placeholder="City" ng-model="facilityData.City"/></div>
                    <div class="col-md-4">
                        <select id="states" name="State" ng-options="states.name as states.name for states in usStates" ng-model="facilityData.State">                                       </select>
                    </div>
                    <div class="col-md-2"><input type="text" name="zipcode" placeholder="Zipcode" ng-model="facilityData.Zipcode" /></div>
                </div>
                <div class="row">
                    <div class="col-md-6"><input type="text" name="phone" placeholder="Phone" ng-model="facilityData.Phone"/> </div>
                    <div class="col-md-6" ><input type="file"> </div>
                </div>
                <div class="row">
                    <div class="col-md-6" >
                        <div id="box" style="text-align:left">
                            <label for="population"> Please list the approximate population of the city in which you practice</label>
                            <select id="population" name="population" 
                                    ng-options="population for population in populations"
                                    ng-model="facilityData.Population"> </select>
                        </div>
                    </div>
                    <div class="col-md-6" >
                        <div id="box" style="text-align:left">
                            <label for="type"> Would you describe your facility as (select all that apply)</label>
                            <div ng-repeat="description in facilityDescription">
                                <input type="checkbox" checklist-value="description.name" checklist-model="facilityData.Type"> {{description.name}}<br>
                            </div>
                        </div>
                    </div>
                </div>
             
                
                <div class="row">
                    <div class="col-md-6" >
                        <div id="box" style="text-align:left">
                            <label for="services"> Services provided at your facility (select all that apply)</label>
                            <div ng-repeat="service in facilityServices">
                                <input type="checkbox" checklist-value="service.name" checklist-model="facilityData.Services"> {{service.name}}<br>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" >
                        <div id="box" style="text-align:left">
                            <label for="training"> If surgery is picked - Please list the level of Cochlear training completed by the surgeons</label>
                            <div ng-repeat="training in facilityCochlearTraining">
                            <input type="checkbox" checklist-value="training.name" 
                                   checklist-model="facilityData.Training"> {{training.name}}<br>
                            </div>
                        </div>
                    </div>
                </div>
                
                <input type="button" name="next" class="next action-button" value="Next" />
                
                {{facilityData}}
            </fieldset>
            <fieldset>
                <h3 class="fs-title">Step 2</h3>
                <h3 class="fs-subtitle">Register your facility administrator</h3>
                <h3 class="fs-subtitle">This is the user who will oversee all administrative duties </h3>
                <div class="row">
                    <div class="col-md-6"><input type="text" name="first" placeholder="First Name" ng-model="administratorData.first_name"/> </div>
                    <div class="col-md-6" ><input type="text" name="last" placeholder="Last Name" ng-model="administratorData.last_name"/> </div>
                </div>
                <input type="text" name="username" placeholder="Username" ng-model="administratorData.username"/>
                <input type="password" name="password" placeholder="Password" ng-model="administratorData.password"/>
                
                <input type="text" name="email" placeholder="Email" ng-model="administratorData.email"/>
                <input type="text" name="phone" placeholder="Phone Number" ng-model="administratorData.phone"/>
                
                <input type="button" name="previous" class="previous action-button" value="Previous" />
                <input type="submit" name="submit" class="submit action-button" value="Submit" ng-click="registerFacility()"/>
                {{administratorData}}
            </fieldset>
        </form>
            </div>
    </body>
    <!-- All Dependencies Here -->
  
<script src="js/angular.js"></script>
<script src="js/angular-route.js"></script>
<script src="js/checklist-model.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap.js"></script>
<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
<script src="js/jquery.min.js"></script>
<!-- jQuery easing plugin -->
<script src="js/jquery.easing.min.js" type="text/javascript"></script>
<script src="js/registration.js" type="text/javascript"></script>

<script>
   var regApp = angular.module('regApp', ['ui.bootstrap','checklist-model'] ); 
   
   var controllers = {};
   
   controllers.regCtrl =  function($scope, $http) {
       
       $scope.administratorData = {};
       $scope.facilityData = {};
       
       
       $scope.facilityDescription = [
           { name: "Academic"},
           { name: "Tertiary"},
           { name: "Community-based"},
           { name: "Private"}
       ];
       $scope.facilityServices = [
           { name: "Audiology"},
           { name: "Surgery"},
           { name: "Speech"},
           { name: "Other"}
       ];
       $scope.facilityCochlearTraining = [
           { name: "General_Otolaryngologist"},
           { name: "Fellowship_Trained_Otologist"}
       ];
        
       //$scope.facilitaData.
       $scope.populations= ["5,000-10,000", "10,000-50,000","50,000-100,000","100,000-500,000","500,000-1,000,000","1,000,000+"]
       $scope.usStates = [
            { name: 'ALABAMA', abbreviation: 'AL'},
            { name: 'ALASKA', abbreviation: 'AK'},
            { name: 'ARIZONA', abbreviation: 'AZ'},
            { name: 'ARKANSAS', abbreviation: 'AR'},
            { name: 'CALIFORNIA', abbreviation: 'CA'},
            { name: 'COLORADO', abbreviation: 'CO'},
            { name: 'CONNECTICUT', abbreviation: 'CT'},
            { name: 'DELAWARE', abbreviation: 'DE'},
            { name: 'DISTRICT OF COLUMBIA', abbreviation: 'DC'},
            { name: 'FLORIDA', abbreviation: 'FL'},
            { name: 'GEORGIA', abbreviation: 'GA'},
            { name: 'GUAM', abbreviation: 'GU'},
            { name: 'HAWAII', abbreviation: 'HI'},
            { name: 'IDAHO', abbreviation: 'ID'},
            { name: 'ILLINOIS', abbreviation: 'IL'},
            { name: 'INDIANA', abbreviation: 'IN'},
            { name: 'IOWA', abbreviation: 'IA'},
            { name: 'KANSAS', abbreviation: 'KS'},
            { name: 'KENTUCKY', abbreviation: 'KY'},
            { name: 'LOUISIANA', abbreviation: 'LA'},
            { name: 'MAINE', abbreviation: 'ME'},
            { name: 'MARSHALL ISLANDS', abbreviation: 'MH'},
            { name: 'MARYLAND', abbreviation: 'MD'},
            { name: 'MASSACHUSETTS', abbreviation: 'MA'},
            { name: 'MICHIGAN', abbreviation: 'MI'},
            { name: 'MINNESOTA', abbreviation: 'MN'},
            { name: 'MISSISSIPPI', abbreviation: 'MS'},
            { name: 'MISSOURI', abbreviation: 'MO'},
            { name: 'MONTANA', abbreviation: 'MT'},
            { name: 'NEBRASKA', abbreviation: 'NE'},
            { name: 'NEVADA', abbreviation: 'NV'},
            { name: 'NEW HAMPSHIRE', abbreviation: 'NH'},
            { name: 'NEW JERSEY', abbreviation: 'NJ'},
            { name: 'NEW MEXICO', abbreviation: 'NM'},
            { name: 'NEW YORK', abbreviation: 'NY'},
            { name: 'NORTH CAROLINA', abbreviation: 'NC'},
            { name: 'NORTH DAKOTA', abbreviation: 'ND'},
            { name: 'OHIO', abbreviation: 'OH'},
            { name: 'OKLAHOMA', abbreviation: 'OK'},
            { name: 'OREGON', abbreviation: 'OR'},
            { name: 'PALAU', abbreviation: 'PW'},
            { name: 'PENNSYLVANIA', abbreviation: 'PA'},
            { name: 'PUERTO RICO', abbreviation: 'PR'},
            { name: 'RHODE ISLAND', abbreviation: 'RI'},
            { name: 'SOUTH CAROLINA', abbreviation: 'SC'},
            { name: 'SOUTH DAKOTA', abbreviation: 'SD'},
            { name: 'TENNESSEE', abbreviation: 'TN'},
            { name: 'TEXAS', abbreviation: 'TX'},
            { name: 'UTAH', abbreviation: 'UT'},
            { name: 'VERMONT', abbreviation: 'VT'},
            { name: 'VIRGIN ISLANDS', abbreviation: 'VI'},
            { name: 'VIRGINIA', abbreviation: 'VA'},
            { name: 'WASHINGTON', abbreviation: 'WA'},
            { name: 'WEST VIRGINIA', abbreviation: 'WV'},
            { name: 'WISCONSIN', abbreviation: 'WI'},
            { name: 'WYOMING', abbreviation: 'WY' }
        ];
       
       $scope.registerFacility = function() {
           $scope.registration = {"FacilityForm" : this.facilityData, "AdminForm": this.administratorData}
           console.log("facility registration");
           $http({
               method  : 'POST',
               //url     : 'http://killzombieswith.us/aii-api/v1/facilities',
               url     : '../aii-api/v1/facilities',
               data    : $scope.registration,  // pass in data as strings
               headers : { 'Content-Type': 'application/json' } 
           })
           .success(function(data) {
               console.log(data);
           });
           
           console.log("admin registration");
           
       }
       
       
       
   }
   
   
   
   regApp.controller(controllers);
   
</script>