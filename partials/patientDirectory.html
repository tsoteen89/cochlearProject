<!DOCTYPE html>
<html lang="en" data-ng-app="myApp" style="width:100%;height:100%">
    
	<head>
		<link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
        <style>
        p{
            margin-bottom: 0px;
            font-size: 85%;
        }
        hr{
            border-top: 1px solid #11ace9;
        }
        
        </style>
	</head>
    
	<body style="width:100%;height:100%">
    
        
        <div style="margin: 1% 1% 1% 1%; height:100%; width:98%; border-style: dashed dashed none dashed ; border-width: 2px;" 
             ng-controller="apiPatientsController">
            <h1 style="color:#84a4b4"> Patient Overviews</h1>
            
            <div ng-repeat="patient in patientsData.records" ng-controller="phaseProgressCtrl">
                <div ng-controller="collapseCtrl">
                    <div  ng-mouseleave="isDataCollapsed = true; isPatientCollapsed = true">

                    <div style="float: left; border: 1px #96b2b4 solid; 
                                margin-left: 20px ; width:20%; padding:8px;">

                        <p ><b>{{patient.First }}  {{patient.Last |uppercase }} </b></p> 
                        <p ng-if=patient.Sex=='m'>Male</p>
                        <p ng-if=patient.Sex=='f'>Female</p>
                        <p> Age </p> 
                        <p ng-if="patient.CareTeams.length==1" style="margin:1.5px"> <br> <br> <br> </p>
                        <p ng-if="patient.CareTeams.length==2" style="margin:3px"> <br> <br> <br><br> <br><br><br><br><br><br><br> </p>
                        <button style="margin-left: 40%; margin-bottom:8px" ng-click="isPatientCollapsed = !isPatientCollapsed">
                            Patient Details </button>

                    </div>

                    <div style="float: left; border: 1px #11ace9 solid; margin-top: auto; width:70%; padding:8px;"> 
                        <p ng-repeat="careTeam in patient.CareTeams">
                            EventID:{{careTeam.CareTeamID}} <br> 
                            Current Phase : {{careTeam.CurrentPhaseID}} <br> <br> 
                            <b>Overall Progress in Care : </b>
                            <progressbar value="progress" type="success">
                                <b>{{setProgress(careTeam)}} {{progress}}%</b>
                            </progressbar>

                            <button style="margin-left: 75%; margin-bottom:8px" ng-click="toggleDataCollapse(); getCareTeamFacilities(careTeam)"> Enter Patient Data </button>  
                            
                        </p>

                    </div>
                        

                    <br> <br> <br> <br>  <br>  <br> <br>   <br> 
                    

                    <div collapse="isPatientCollapsed">
                        <div class="well well-lg" style="width:90%; margin-left: 20px; margin-top:2%">
                            More Patient Data <br>
                            BMI: {{patient.BMI}} <br>
                            Weight: {{patient.Weight}} <br>
                            Height: {{patient.Height}} <br>
                        </div> 

                    </div>


                    <div collapse="isDataCollapsed">
                        <div class="well well-lg" style="width:90%; margin-left: 20px;">
                            CareTeam Facilities
                            <p ng-repeat="facility in facilityData.records">
                                {{facility.Name}}
                            </p>

                            <a href="#/questions"><button>Questions</button></a>
                        </div> 

                    </div>

                    </div>
                </div>
                
            </div>
        </div>
<!--
        <div ng-controller="apiPatientsController">    
        
        <h1>Patients</h1>
        <h3>Search Patient:</h3> 
        Name: <input type="text" data-ng-model="searchName">
        <br>
        <br>
-->
            <!-- Patients -->
    <!--
            <div style="width:25%;float:left">
                
                <table class="table table-hover">
                    <tr>
                        <td><strong>First Name</strong></td>
                        <td><strong>Last Name</strong></td>
                        <td><strong>Patient ID</strong></td>
                    </tr>
                    <tr data-ng-repeat="patients in patientsData.records | filter: searchName">
                        <td class="col-md-1">
                            <a href="" ng-click="getPatientCareTeam(patients)">{{patients.First}}</a>
                        </td>
                        <td class="col-md-1">
                            {{patients.Last}}
                        </td>
                        <td class="col-md-1">
                            {{patients.PatientID}}
                        </td>
                    </tr>
                </table>

            </div>
    -->
            <!-- Care Teams -->
    <!--
           <div style="width:30%;float:left;margin-left:10%">
                
                <table class="table table-hover">
                    <tr>
                        <td><strong>Care Teams</strong></td>
                        <td><strong>Current Phase</strong></td>
                    </tr>
                    <tr data-ng-repeat="careTeams in patientCareTeams.records | filter: searchName">
                        <td class="col-md-1">
                            <a href="" ng-click="getCareTeamFacilities(careTeams)">{{careTeams.CareTeamID}}</a>
                        </td>
                        <td class="col-md-1">
                            {{careTeams.CurrentPhaseID}}
                        </td>
                    </tr>
                </table>
            </div>
    -->   
            <!-- Facilities -->
    <!--
            <div style="width:30%;float:left;margin-left:10%">
                
                <table class="table table-hover">
                    <tr>
                        <td><strong>Facility Name</strong></td>
                    </tr>
                    <tr data-ng-repeat="facility in facilityData.records | filter: searchName">
                        <td class="col-md-1">
                            {{facility.Name}}
                        </td>
                    </tr>
                </table>
                <a href="#/questions"><button>Edit Patient</button></a>
            </div>
        </div>
    -->
	</body>
</html>
