


    <div class = "container" ng-controller="apiMessagingController">

      <div class = "row"  ng-controller = "TabController as tab">
        <a href="#"><strong><i class="glyphicon glyphicon-dashboard"></i> My Dashboard</strong></a>
        

        <div class = "messaging-system">
          <div class = "col-xs-10 button-wrapper">
            
            <button type = "button" class = "btn btn-default" ng-click = 'tab.selectTab(1)'>
              <span><i class = "glyphicon glyphicon-plus"></i></span> New Message
            </button>

            <input class = "search-message pull-right" type = "search" placeholder = "Search Messages.." ng-hide = "tab.isSelected(1)">
          </div>

          
          <div class = "col-xs-3">
            <ul class = "nav nav-pills nav-stacked">
              <hr>
              <li ng-class = "{ active:tab.isSelected(-1) }"><a href ng-click = "tab.selectTab(-1); togglePopup()">Inbox</a></li>
              <li ng-class = "{ active:tab.isSelected(2) }"><a href ng-click = "tab.selectTab(2); togglePopup()">Sent</a></li>
              <li ng-class = "{ active:tab.isSelected(3) } "><a href ng-click = "tab.selectTab(3); togglePopup()">Drafts</a></li>
              <li ng-class = "{ active:tab.isSelected(4) }"><a href ng-click = "tab.selectTab(4); togglePopup()">Deleted</a></li>
              <hr>
            </ul>
          </div>
          
        
          <div class = "col-xs-7 message-wrapper" ng-show = "tab.isSelected(1)">
            <!--  -->
            <hr>
            <form name = "messageSender" class = "message" ng-submit = "messageSender.$valid && messageForm()">
              <input class = "send" type = "text" placeholder = "To:" style = "width: 75%; margin-bottom: 5px;" ng-required="true" ng-model="composeObject.receiver_id"> <br>
              
              <input class = "subject" type = "text" placeholder = "Subject:" style = "width: 75%; margin-bottom: 5px;" ng-required="true" ng-model="composeObject.subject"> <br>

              <textarea rows = "10" cols = "100" placeholder = "Message:" style = "margin-bottom: 10px;" ng-required="true" ng-model = "composeObject.content"></textarea><br>

              <input class = "btn btn-success" type = "submit" name = "submit" style = "margin-right: 5px;" value = "Send"></input>
              <button class = "btn btn-default" type = "button" name = "cancel" value = "Cancel">Cancel</button>
            </form>

            {{ composeObject }}
            <hr>
          </div>

        
          <div class = "col-xs-7 message-inbox" ng-show = "tab.isSelected(-1)">
            <hr>
            <div class = "table-responsive">
              <table class = "table table-striped table-hover">
                <tr>
                  <th>
                    <input type = "checkbox"> <a href = ""><span><i class = "glyphicon glyphicon-chevron-down"></i></span>
                    </a>
                  </th>
                  <th>From</th>
                  <th>Subject</th>
                  <th>Time</th>
				  <th>Date</th>
                </tr>
				<tr ng-repeat="message in inboxMessages.records" ng-click="togglePopup(message)">
				  <td><input type = "checkbox"> </td>
				  <td>{{message.SenderID}}</td>
				  <td>{{message.Subject}}</td>
				  <td>{{message.Timestamp * 1000 | date:'h:mm a'}}</td>
				  <td>{{message.Timestamp * 1000 | date:'M/d/yy'}}</td>
				</tr>
				</table>
			</div>
              <ul class="pagination pull-right">
                <li><a href="">&laquo;</a></li>
                <li><a href="">1</a></li>
                <li><a href="">&raquo;</a></li>
              </ul>
              <hr>
			  <div class="modal-dialogue" ng-show="isPopupVisible">
				<div class="modal-header">
					<h3>{{selectedMessage.Subject}}</h3>
				</div>
				<div class="modal-body">
					<strong>From:</strong> {{selectedMessage.SenderID}} </br>
					<strong>Time:</strong> {{selectedMessage.Timestamp * 1000 | date:'h:mm a'}} </br>
					<strong>Date:</strong> {{selectedMessage.Timestamp * 1000 | date:'M/d/yy'}} </br>
					</br>
					<p>
						{{selectedMessage.Content}}
					</p>
				</div>
				<div class="modal-footer">
					<a class="btn btn-primary" ng-click="togglePopup()">Close</a>
				</div>
			  </div>
          </div>



          <div class = "col-xs-7 message-sent" ng-show = "tab.isSelected(2)">
            <hr>
            <div class = "table-responsive">
              <table class = "table table-striped table-hover">
                <tr>
                  <th>
                     <input type = "checkbox"> <a href = ""><span><i class = "glyphicon glyphicon-chevron-down"></i></span>
                    </a>
                  </th>
                  <th>To</th>
                  <th>Subject</th>
				  <th>Time</th>
                  <th>Date</th>
                </tr>
                <tr ng-repeat="message in sentMessages.records" ng-click="togglePopup(message)">
                  <td><input type = "checkbox"> </td>
                  <td>{{message.SenderID}}</td>
                  <td>{{message.Subject}}</td>
                  <td>{{message.Timestamp * 1000 | date:'h:mm a'}}</td>
				  <td>{{message.Timestamp * 1000 | date:'M/d/yy'}}</td>
                </tr>
                
              </table>
            </div>
             <ul class="pagination pull-right">
                <li><a href="">&laquo;</a></li>
                <li><a href="">1</a></li>
                <li><a href="">&raquo;</a></li>
              </ul>
              <hr>
			  <div class="modal-dialogue" ng-show="isPopupVisible">
				<div class="modal-header">
					<h3>{{selectedMessage.Subject}}</h3>
				</div>
				<div class="modal-body">
					<strong>From:</strong> {{selectedMessage.SenderID}} </br>
					<strong>Time:</strong> {{selectedMessage.Timestamp * 1000 | date:'h:mm a'}} </br>
					<strong>Date:</strong> {{selectedMessage.Timestamp * 1000 | date:'M/d/yy'}} </br>
					</br>
					<p>
						{{selectedMessage.Content}}
					</p>
				</div>
				<div class="modal-footer">
					<a class="btn btn-primary" ng-click="togglePopup()">Close</a>
				</div>
			  </div>
          </div>



          <div class = "col-xs-7 message-drafts" ng-show = "tab.isSelected(3)">
            <hr>
            <div class = "table-responsive">
              <table class = "table table-striped table-hover">
                <tr>
                  <th>
                    <input type = "checkbox"> <a href = ""><span><i class = "glyphicon glyphicon-chevron-down"></i></span>
                    </a>
                  </th>
                  <th>Subject</th>
				  <th>Time</th>
                  <th>Date</th>
                </tr>
                <tr ng-repeat="message in draftMessages.records" ng-click="togglePopup(message)">
                  <td><input type = "checkbox"> </td>
                  <td>{{message.Subject}}</td>
                  <td>{{message.Timestamp * 1000 | date:'h:mm a'}}</td>
				  <td>{{message.Timestamp * 1000 | date:'M/d/yy'}}</td>
                </tr>
              </table>
            </div>
             <ul class="pagination pull-right">
                <li><a href="">&laquo;</a></li>
                <li><a href="">1</a></li>
                <li><a href="">&raquo;</a></li>
              </ul>
              <hr>
			  <div class="modal-dialogue" ng-show="isPopupVisible">
				<div class="modal-header">
					<h3>{{selectedMessage.Subject}}</h3>
				</div>
				<div class="modal-body">
					<strong>From:</strong> {{selectedMessage.SenderID}} </br>
					<strong>Time:</strong> {{selectedMessage.Timestamp * 1000 | date:'h:mm a'}} </br>
					<strong>Date:</strong> {{selectedMessage.Timestamp * 1000 | date:'M/d/yy'}} </br>
					</br>
					<p>
						{{selectedMessage.Content}}
					</p>
				</div>
				<div class="modal-footer">
					<a class="btn btn-primary" ng-click="togglePopup()">Close</a>
				</div>
			  </div>
          </div>



           <div class = "col-xs-7 message-deleted" ng-show = "tab.isSelected(4)">
            <hr>
            <div class = "table-responsive">
              <table class = "table table-striped table-hover">
                <tr>
                  <th>
                    <input type = "checkbox"> <a href = ""><span><i class = "glyphicon glyphicon-chevron-down"></i></span>
                    </a>
                  </th>
                  <th>From</th>
				  <th>To</th>
                  <th>Subject</th>
				  <th>Time</th>
				  <th>Date</th>
                </tr>
                <tr ng-repeat="message in deletedMessages.records" ng-click="togglePopup(message)">
                  <td><input type = "checkbox"> </td>
				  <td>{{message.SenderID}}</td>
				  <td>{{message.ReceiverID}}</td>
                  <td>{{message.Subject}}</td>
                  <td>{{message.Timestamp * 1000 | date:'h:mm a'}}</td>
				  <td>{{message.Timestamp * 1000 | date:'M/d/yy'}}</td>
                </tr>
              </table>
            </div>
             <ul class="pagination pull-right">
                <li><a href="">&laquo;</a></li>
                <li><a href="">1</a></li>
                <li><a href="">&raquo;</a></li>
              </ul>
              <hr>
			  <div class="modal-dialogue" ng-show="isPopupVisible">
				<div class="modal-header">
					<h3>{{selectedMessage.Subject}}</h3>
				</div>
				<div class="modal-body">
					<strong>From:</strong> {{selectedMessage.SenderID}} </br>
					<strong>To:</strong> {{selectedMessage.ReceiverID}} </br>
					<strong>Time:</strong> {{selectedMessage.Timestamp * 1000 | date:'h:mm a'}} </br>
					<strong>Date:</strong> {{selectedMessage.Timestamp * 1000 | date:'M/d/yy'}} </br>
					</br>
					<p>
						{{selectedMessage.Content}}
					</p>
				</div>
				<div class="modal-footer">
					<a class="btn btn-primary" ng-click="togglePopup()">Close</a>
				</div>
			  </div>
          </div>
          
        </div>

        </div>
    </div>